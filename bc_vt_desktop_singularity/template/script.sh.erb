#!/bin/bash -l

env > env.txt

pwd
#unset XDG_RUNTIME_DIR

module list

echo running on `hostname`
echo starting singularity

module load containers/singularity
	
singularity run --bind `pwd`:/cwd,/projects,/work/$USER /projects/arcsingularity/ubuntu-xfce-v0.0.1.sif &
while [ ! -f ./connection.rc ]; do sleep 1; done
source connection.rc
xterm


#singularity run --bind=/home/$USER:/home/$USER/Documents,/var:/var,`pwd`/vnc.log:/dockerstartup/vnc.log,`pwd`/novnc.log:/dockerstartup/novnc.log,/tmp:/tmp,/projects:/projects,/work:/work,`pwd`/startup.sh:/dockerstartup/startup.sh,`pwd`/port.rc:/dockerstartup/port.rc --writable-tmpfs --containall ${TMPDIR}/<%= context.Container %>



