#!/bin/bash -l

env > env.txt

pwd
#unset XDG_RUNTIME_DIR

module list

echo running on `hostname`
echo starting singularity

module load containers/singularity

## binding log files for troubleshooting
touch vnc.log
touch novnc.log

cat port.rc
	
bash start_container.sh ${TMPDIR}/<%= context.Container %> & 

sleep 2

singularity exec --env DISPLAY=$DISPLAY --writable-tmpfs --bind=/tmp:/tmp,/tmp/.X11-unix:/tmp/.X11-unix,/projects:/projects,/work:/work \
  /projects/arcsingularity/qgis_desktop_3.8.sif qgis


